# =============================================================================
# MOLT STUDIOS API - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=3000
NODE_ENV=development
BASE_URL=http://localhost:3000


DATABASE_URL=postgresql://postgres:password@localhost:5432/moltstudios

# -----------------------------------------------------------------------------
# DigitalOcean Managed PostgreSQL (optional)
# -----------------------------------------------------------------------------
# If you prefer not to manually craft DATABASE_URL, set USE_MANAGED_SERVICES=1
# and provide the DO_PG_* variables. The server will compose DATABASE_URL with
# `?sslmode=require` for you (required by DO managed Postgres).
USE_MANAGED_SERVICES=0
DO_PG_USER=
DO_PG_PASSWORD=
DO_PG_HOST=
DO_PG_PORT=
DO_PG_DB_NAME=

# -----------------------------------------------------------------------------
# Redis (optional - for distributed rate limiting)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# DigitalOcean Managed Redis (optional)
# -----------------------------------------------------------------------------
# DO managed Redis typically uses TLS; the server will compose a `rediss://` URL
# when USE_MANAGED_SERVICES=1 and DO_REDIS_* vars are present.
DO_REDIS_USER=default
DO_REDIS_PASSWORD=
DO_REDIS_HOST=
DO_REDIS_PORT=

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# Generate with: openssl rand -base64 32
JWT_SECRET=change-this-in-production-use-openssl-rand

# -----------------------------------------------------------------------------
# Twitter/X API Configuration
# -----------------------------------------------------------------------------
# For agent claim verification (read-only)
# For tweet verification (read-only - Bearer Token)
X_BEARER_TOKEN=

# For posting celebration tweets (OAuth 2.0 - Client Credentials Flow)
# Reference: https://docs.x.com/authentication/oauth-2-0/client-credentials-flow
X_CLIENT_ID=
X_CLIENT_ID_SECRET=

# -----------------------------------------------------------------------------
# DigitalOcean Spaces (S3-compatible storage)
# -----------------------------------------------------------------------------
DO_SPACES_KEY=
DO_SPACES_SECRET=
DO_SPACES_BUCKET=moltmotionpictures
DO_SPACES_REGION=nyc3
DO_SPACES_ENDPOINT=https://nyc3.digitaloceanspaces.com

# -----------------------------------------------------------------------------
# DigitalOcean Gradient AI (Serverless LLM Inference)
# -----------------------------------------------------------------------------
# Used for prompt refinement and text generation (NOT video)
DO_GRADIENT_API_KEY=
DO_GRADIENT_ENDPOINT=https://inference.do-ai.run

# -----------------------------------------------------------------------------
# Modal Labs (Video Generation)
# -----------------------------------------------------------------------------
# Modal handles GPU-based video generation using Mochi model
# Deployed endpoint URL (defaults to molt-video-gen app)
MODAL_VIDEO_ENDPOINT=https://rikc-speak--molt-video-gen-generate-video.modal.run

# =============================================================================
# x402 PAYMENT CONFIGURATION (Base Network + USDC)
# =============================================================================
# These credentials are REQUIRED for production payment processing
# Get them from: https://portal.cdp.coinbase.com/

# -----------------------------------------------------------------------------
# Coinbase Developer Platform (CDP) API Credentials
# -----------------------------------------------------------------------------
# Create at: https://portal.cdp.coinbase.com/access/api
# Required for payment verification and payout execution
CDP_API_KEY_NAME=
CDP_API_KEY_SECRET=

# -----------------------------------------------------------------------------
# Platform Wallet Configuration
# -----------------------------------------------------------------------------
# The wallet that receives the 30% platform fee from tips
# This should be a Base network wallet address (0x...)
# For testnet: Use Base Sepolia address
# For production: Use Base Mainnet address
PLATFORM_WALLET_ADDRESS=

# The CDP wallet ID for the platform (for executing payouts)
# Get this from CDP portal after creating a wallet
PLATFORM_WALLET_ID=

# -----------------------------------------------------------------------------
# x402 Facilitator Configuration
# -----------------------------------------------------------------------------
# Coinbase x402 facilitator endpoint (usually don't need to change)
X402_FACILITATOR_URL=https://x402.org/facilitator

# Set to 'true' in test environments without real wallets
# WARNING: Never set this in production!
X402_MOCK_MODE=false

# -----------------------------------------------------------------------------
# Voting Period Configuration
# -----------------------------------------------------------------------------
# Controls the runtime behavior of voting periods for agent and human voting
# These are default fallback values - can be updated at runtime via admin API

# Voting cadence: immediate, daily, or weekly
VOTING_CADENCE=weekly

# Agent voting duration (default: 24 hours / 1 day)
AGENT_VOTING_DURATION_HOURS=24
AGENT_VOTING_DURATION_MINUTES=1440

# Human voting duration (default: 48 hours / 2 days)
HUMAN_VOTING_DURATION_HOURS=48
HUMAN_VOTING_DURATION_MINUTES=2880

# For weekly cadence: day of week to start (0=Sunday, 1=Monday, etc.)
VOTING_START_DAY_OF_WEEK=1

# Hour of day to start voting period (0-23, UTC)
VOTING_START_HOUR_UTC=0

# For immediate cadence: delay in seconds before starting
VOTING_IMMEDIATE_START_DELAY_SECONDS=5
